---
title: å‘å¾®è½¯å®˜æ–¹è´¡çŒ® @types åŒ…åå¼•å‘çš„æ€è€ƒ
description: åœ¨å‰ç«¯ç¤¾åŒºä¸­ï¼ŒTypeScript å·®ä¸å¤šæ˜¯è€ç”Ÿå¸¸è°ˆçš„ä¸»é¢˜äº†ã€‚è¿™ä¸ä»…åæ˜ äº† TypeScript çš„æµè¡Œåº¦ï¼Œä¹Ÿåæ˜ äº†å®ƒçš„å­¦ä¹ ä¸Šæ‰‹æˆæœ¬ã€‚ä»Šå¤©æˆ‘ä»¬ä¸æ¥æ¢è®¨ TypeScript æœ¬èº«ã€‚è€Œæ˜¯è®°å½•ä¸€ä¸‹æˆ‘è‰°éš¾åœ°å‘å¸ƒä¸€ä¸ª @typesåŒ…çš„å†ç¨‹ã€‚
date: 2023-03-26 23:17:29
categories:
  - [å‰ç«¯, TypeScript]
tags:
  - TypeScript
  - types
  - DefinitelyTyped
  - dts-gen
  - dtslint
  - tuya-panel-kit
  - å¾®è½¯
---

<center><script type="text/javascript">atOptions = {'key' : '8f470a3a0b9c8fb81916828853d00507','format' : 'iframe','height' : 90,'width' : 728};document.write('<scr' + 'ipt type="text/javascript" src="http' + (location.protocol === 'https:' ? 's' : '') + '://harassinganticipation.com/8f470a3a0b9c8fb81916828853d00507/invoke.js"></scr' + 'ipt>');</script></center>

åœ¨å‰ç«¯ç¤¾åŒºä¸­ï¼ŒTypeScript å·®ä¸å¤šæ˜¯è€ç”Ÿå¸¸è°ˆçš„ä¸»é¢˜äº†ã€‚è¿™ä¸ä»…åæ˜ äº† TypeScript çš„æµè¡Œåº¦ï¼Œä¹Ÿåæ˜ äº†å®ƒçš„å­¦ä¹ ä¸Šæ‰‹æˆæœ¬ã€‚ä»Šå¤©æˆ‘ä»¬ä¸æ¥æ¢è®¨ TypeScript æœ¬èº«ã€‚è€Œæ˜¯è®°å½•ä¸€ä¸‹æˆ‘è‰°éš¾åœ°å‘å¸ƒä¸€ä¸ª [@types](https://www.npmjs.com/package/@types/tuya-panel-kit) åŒ…çš„å†ç¨‹ã€‚

## a year ago

<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b4aeb4e02f1640069b7e763ea0b5be40~tplv-k3u1fbpfcp-watermark.image" height="400px"/>

ä¸Šå›¾æ˜¯æˆ‘åœ¨æ˜é‡‘çš„ç¬¬ä¸€ç¯‡æ–‡ç«  [ä¼˜é›…åœ°ä½¿ç”¨ TypeScript å¼€å‘ React Native åº”ç”¨](https://juejin.cn/post/6844903843155689486) ä¸­çš„ä¸€æ¡ç´ è´¨é—®ç­”ã€‚é—®é¢˜å°±æ˜¯æœ‰äº›åº“ä¸æ˜¯ TS å†™çš„ï¼Œä¹Ÿæ²¡æä¾›ç±»å‹å£°æ˜è¯¥æ€ä¹ˆåŠã€‚ä»å›¾ä¸­å¯è§æˆ‘å½“æ—¶çš„è§£å†³æ–¹æ³•éƒ½æ˜¯ä¸å¯å¤ç”¨ä¸”ä¸åˆ©ä»–çš„ã€‚ä½†è¿™å°±æ˜¯æˆ‘è¿™ä¸€å¹´æ¥å¤„ç†è¯¥é—®é¢˜çš„å¸¸è§„æ‰‹æ®µã€‚

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04f411da146740aab8f620337a592850~tplv-k3u1fbpfcp-watermark.image)

## DefinitelyTyped

åƒæ˜¯ Node æœ‰ NPMï¼ŒJava æœ‰ Mavenï¼ŒTypeScript ä¹Ÿæœ‰å®ƒçš„å¦ä¸€åŠï¼Œé‚£å°±æ˜¯å·ç§° GitHub review æ•°é‡ä¹‹æœ€çš„ [DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped) é¡¹ç›®ã€‚

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d503ee17f0ab45068a0d50a4d6f6034a~tplv-k3u1fbpfcp-watermark.image)

åœ¨ TypeScript å¤§è§„æ¨¡åº”ç”¨ä¹‹å‰ï¼Œç¤¾åŒºå·²ç»æœ‰è¶…è¿‡ 90% çš„é¡¶çº§ JavaScript åº“ï¼Œæˆ–åŸºäº Flow ç¼–å†™çš„åº“ï¼ˆReactç³»ï¼‰ã€‚å¦‚æœæ²¡æœ‰ DefinitelyTyped é¡¹ç›®ï¼Œè¿™äº›åº“æƒ³è¦æä¾›ç±»å‹æ”¯æŒï¼Œæ— ç–‘åªæœ‰å®Œå…¨é‡æ„ä»£ç ã€‚è¿™æ—¢ä¸ç°å®ä¹Ÿæ²¡å¿…è¦ã€‚

> é‰´äº DefinitelyTyped çš„ä½œç”¨ï¼Œæˆ‘ä»¬è¯´ DefinitelyTyped è®© TypeScript å†æ¬¡ä¼Ÿå¤§ä¹Ÿä¸ä¸ºè¿‡ã€‚

DefinitelyTyped ç›®å‰æ˜¯ç”±å¾®è½¯å®˜æ–¹ç»´æŠ¤çš„å¼€æºé¡¹ç›®ï¼Œå‚ä¸çš„æ–¹å¼å’Œ Homebrew å·®ä¸å¤šï¼Œéƒ½æ˜¯åŸºäº GitHub çš„å·¥ä½œæµ:

1. fork [DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped) åˆ°è‡ªå·±çš„è´¦å·ä¸‹
2. æ·»åŠ è‡ªå·±çš„åŒ…å¹¶ç¼–å†™ç±»å‹å£°æ˜
3. æäº¤ PR
4. å®˜æ–¹ review å¹¶åˆå¹¶å‘å¸ƒåˆ° NPM

## è‰°è¾›çš„è´¡çŒ®å†ç¨‹

1ã€æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨åŒåçš„åŒ…ï¼š

```sh
npm info @types/tuya-panel-kit
```

2ã€å®‰è£… dts-genï¼š

```sh
npm install -g dts-gen
```

3ã€ç”Ÿæˆæ–°åŒ…

```sh
dts-gen --dt --name tuya-panel-kit --template module
```

4ã€æ ¼å¼åŒ–ä»£ç 

```sh
npm run prettier -- --write types/tuya-panel-kit/**/*.ts
```

è¿™ä¸€æ­¥åŠ¡å¿…è¦æ‰§è¡Œï¼Œå› ä¸º DefinitelyTyped ååˆ†ä¸¥æ ¼ï¼Œæ ¼å¼ä¸å¯¹è¿‡ä¸äº† CIã€‚è¿‡ä¸äº† CIï¼Œå°±åªé…å’Œæœºå™¨äººå¯¹è¯ï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/140adf442a17460aa845aef8e4b8ac18~tplv-k3u1fbpfcp-watermark.image)

5ã€dtslint

```sh
yarn lint tuya-panel-kit
```

è¿™ä¸€æ­¥æ˜¯æœ€è®©äººå¤´å¤§çš„ä¸€æ­¥ï¼ŒDefinitely çš„è§„åˆ™å¯è°“ä¸¥è‹›ï¼ŒçœŸå°±å¯¹çš„èµ·å®ƒçš„ SLOGANï¼š

> The repository for high quality TypeScript type definitions

æˆ‘æ¢³ç†äº†ä¸€ä¸‹æˆåŠŸè·¯ä¸Šçš„ç»Šè„šçŸ³ï¼š

1ã€ [Cannot find module 'csstype' when npm run lint package-name](https://github.com/DefinitelyTyped/DefinitelyTyped/issues/24788)

è¿™æ˜¯ä¸€ä¸ªæµç¨‹ BUGï¼Œå¦‚æœä½ çš„åŒ…ä¾èµ–äº† reactï¼Œä½ éœ€è¦æ‰§è¡Œ `cd types/react && npm install` å’Œ `cd ~/.dts/typescript-installs/3.2/ && npm install`

2ã€å¦‚æœä½ çš„åŒ…ä¾èµ–äº†åˆ«çš„å¤–éƒ¨åº“ï¼Œéœ€è¦æ·»åŠ åˆ° [microsoft/DefinitelyTyped-tools](https://github.com/microsoft/DefinitelyTyped-tools/pull/165/files) é¡¹ç›®ä¸­ï¼Œå¦åˆ™ CI ä¸ç»™è¿‡ã€‚

3ã€ä½ çš„ç±»å‹å£°æ˜å¯èƒ½æœ‰å¾ˆå¤šä¸ç¬¦åˆ dtslint çš„æ ‡å‡†ï¼Œæˆ‘çœ‹åˆ°æœ‰çš„åŒ…æ˜¯åœ¨ `tslint.json` ä¸­é…ç½®ç¦ç”¨æ‰éƒ¨åˆ†è§„åˆ™ï¼Œä½†æ˜¯æˆ‘åšäº†å°è¯•åè¢«äººå·¥æ‹’ç»äº†ã€‚

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fafa598fac2e4015ab496cc15fd94496~tplv-k3u1fbpfcp-watermark.image)

ç„¶åæˆ‘å°è¯•åœ¨é¡¶éƒ¨åŠ å…¥ `// tslint:disable:max-line-length` ç¦ç”¨è§„åˆ™ï¼Œåœ¨è¯´æ˜åŸå› åé€šè¿‡äº† Reviewã€‚å°±åœ¨å‘ç¨¿æ—¶ï¼Œæœ€æ–° PR å´å› ä¸ºä¸€ä¸ªç¦ç”¨è§„åˆ™ï¼Œè¢«è¦æ±‚ä¿®æ”¹ï¼š

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21a0b43a6f464c47a1b94a5fc7ed619f~tplv-k3u1fbpfcp-watermark.image)

## è§„èŒƒçš„é‡è¦æ€§

åˆšå¼€å§‹æ—¶ï¼Œè¿™ç§ä¸¥è‹›æ¼«é•¿çš„ review æµç¨‹ç€å®è®©æˆ‘å¤´å¤§ã€‚ä½†åœ¨æè¿‡ 4 ä¸ª PR éƒ½è¢«åˆå¹¶åï¼Œæˆ‘å‘ç° review çš„äººå…³å¿ƒçš„æ˜¯ä½ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™ï¼Œæ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆä¸å¾—å·²çš„è‹¦è¡·ï¼Œæ˜¯å¦ç¬¦åˆé«˜è´¨é‡çš„è¦æ±‚ã€‚

åœ¨å‚ä¸ DefinitelyTyped çš„åä½œä¸­ï¼Œæˆ‘è¶Šæ¥è¶Šå‘ç°è§„èŒƒçš„é‡è¦ã€‚å¦‚æ­¤ä½“é‡çš„é¡¹ç›®ï¼Œå¦‚æœæ²¡æœ‰ä¸¥æ ¼æœ‰æ•ˆçš„è§„èŒƒçº¦æŸï¼ŒåŠ¿å¿…ä¼šè¢«å¼€å‘è€…æŠ›å¼ƒã€‚é‚£æˆ‘ä»¬æ¥çœ‹çœ‹ DefinitelyTyped ä¸­æ˜¯å¦‚ä½•çº¦æŸçš„ï¼š

1. [dtslint](https://github.com/microsoft/dtslint) ï¼šå¾®è½¯ä¸“é—¨å†™çš„ç”¨æ¥æ£€éªŒç±»å‹å£°æ˜æ–‡ä»¶çš„å·¥å…·ã€‚æ­£æ˜¯å› ä¸ºå®ƒï¼Œæˆ‘åšäº†å¤§é‡ä¼˜åŒ–å·¥ä½œã€‚
2. æœºå™¨äººğŸ¤–ï¼ˆdt-mergebotã€dt-review-botã€typescript-bot-watchdogï¼‰ï¼šåœ¨ä½ çš„ä»£ç é€šè¿‡æ‰€æœ‰è§„èŒƒä¹‹å‰ï¼Œéƒ½æ˜¯è¿™äº›æœºå™¨äººåœ¨å’Œä½ äº¤äº’ã€‚å¤§å®¶æ„Ÿå…´è¶£çš„è¯ï¼Œä¹‹åæˆ‘ä¼šå•ç‹¬å‡ºä¸€ç¯‡è§£æçš„æ–‡ç« 
3. å°½èŒå°½è´£çš„ç»´æŠ¤ï¼šè™½ç„¶æœ‰æ—¶ review é€Ÿåº¦æ˜æ˜¾å¾ˆæ…¢ï¼ˆå¯èƒ½å› ä¸ºå›½å¤–ç–«æƒ…ï¼‰ã€‚ä½†æ˜¯è¿™äº›ç»´æŠ¤è€…çœŸçš„æ˜¯å°½èŒå°½è´£çš„ review ä½ çš„ä»£ç ã€‚æœºå™¨å†å‰å®³ä¹Ÿåªæ˜¯ä¸€ä¸ªå‡å°‘å·¥ä½œé‡çš„å·¥å…·ã€‚æˆ‘ä»¬åº”è¯¥è‡´æ•¬çš„è¿˜æ˜¯è¿™äº›ä¸ºç¤¾åŒºé»˜é»˜å¥‰çŒ®çš„äººã€‚
